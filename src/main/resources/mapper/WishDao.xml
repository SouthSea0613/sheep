<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com._401unauthorized.sheep.dao.WishDao">
    <!--리스트 가져오기-->
    <!--  위시리스트에 갔을때 제목이랑 상태 값을 가지고 와야함으로 WISH_TITLE이랑 APPLY_STATUS를 select했다.  -->
    <!--  LEFT JOIN은 왼쪽의테이블을 중심으로 오른쪽테이블을 매치를 함으로 WISH_TITLE오른쪽에 APPLY_STATUS를 매치한다.  -->
    <!--  ON은 WISH 테이블과 APPLY_STATUS 테이블의 WISH_NUMBER로 조인했다.  -->
    <!--  WHERE은 조건문으로 WISH의 USER_ID와 값이 같은 USER_ID를 찾는다.  -->
    <!--  위시 제목과 현재 진행상태가 보여야하기 때문에 wish 테이블과 apply status 테이블을 조인하여 가져오는거야  -->
    <!--  LEFT조인을 한 이유는 오른쪽!!!!에 NULL 값이 있기 때문이야!-->
    <select id="get_wish_list" resultType="com._401unauthorized.sheep.dto.WishDto">
        SELECT W.WISH_TITLE, A.APPLY_STATUS
        FROM WISH W
<<<<<<< HEAD
        LEFT JOIN APPLY_STATUS A
        ON W.WISH_NUMBER = A.WISH_NUMBER
=======
                LEFT JOIN APPLY_STATUS A
                      ON W.WISH_NUMBER = A.WISH_NUMBER
>>>>>>> yoonsic2
        WHERE W.USER_ID = #{user_id};
    </select>

    <!--글쓰기!(generateKey) 사용-->
    <!--  WISH 테이블의 필수 값을 순서대로 write.html에 있는 틀에 맞춰 작성된 VALUE값을 불러온다. 아래 모두 같다.  -->
    <insert id="insert_wish" useGeneratedKeys="true" keyProperty="wish_number">
        INSERT INTO WISH
        VALUES (null, #{user_id}, #{wish_title}, #{wish_type}, #{wish_size}, #{wish_size_text}, #{wish_money}, #{wish_addr})
    </insert>

    <!--대분류 insert-->
    <insert id="insert_major">
        INSERT INTO MAJOR_CATEGORY_CONTENT
        VALUES (#{category_number}, #{wish_number}, #{major_text})
    </insert>

    <!--중분류 insert-->
    <insert id="insert_sub">
        INSERT INTO SUB_CATEGORY
        VALUES (#{category_number}, #{wish_number})
    </insert>

</mapper>